{"createdAt":"2025-07-18T19:08:59.035Z","updatedAt":"2025-10-08T12:52:35.055Z","id":"CsOTcOT7WBbkUIip","name":"Agente Regional - MCP SERVER","active":false,"isArchived":false,"nodes":[{"parameters":{"path":"0abc1ae5-9674-49c6-b316-089c9193c2f8"},"type":"@n8n/n8n-nodes-langchain.mcpTrigger","typeVersion":1,"position":[-528,192],"id":"2f5e8db3-f70a-49f4-8e2a-5dbd8e1fc657","name":"MCP Server Trigger","webhookId":"0abc1ae5-9674-49c6-b316-089c9193c2f8"},{"parameters":{"name":"disponibilidade","description":"• disponibilidade: Lista os horários disponíveis para agendamento.","workflowId":{"__rl":true,"value":"U4Zk3FBctzHv6xO5","mode":"list","cachedResultName":"[Regional] Tools Agendamento"},"workflowInputs":{"mappingMode":"defineBelow","value":{"type":"getDates"},"matchingColumns":[],"schema":[{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"data","displayName":"data","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":true},{"id":"numero","displayName":"numero","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":true},{"id":"sinistro","displayName":"sinistro","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.1,"position":[128,144],"id":"ce0a4264-6639-4d65-bb6c-a4cac2f5b783","name":"disponibilidade"},{"parameters":{"name":"realizar_agendamento","description":"• realizar_agendamento: Realiza o agendamento na data escolhida.","workflowId":{"__rl":true,"value":"U4Zk3FBctzHv6xO5","mode":"list","cachedResultName":"[Regional] Tools Agendamento"},"workflowInputs":{"mappingMode":"defineBelow","value":{"type":"scheduleAppointment","numero":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('numero', `Número de telefone do cliente`, 'string') }}","data":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data', `Será a data de agendamento seguindo esse formato: 2025-01-01T10:15:00-03:00`, 'string') }}","sinistro":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('sinistro', `Sinistro do cliente`, 'string') }}"},"matchingColumns":[],"schema":[{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"data","displayName":"data","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"numero","displayName":"numero","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"sinistro","displayName":"sinistro","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.1,"position":[304,144],"id":"e6217090-6115-4880-8fc5-7d51e0284fa4","name":"realizar_agendamento"},{"parameters":{"name":"realizar_reagendamento","description":"• realizar_reagendamento: Realiza o reagendamento em nova data.","workflowId":{"__rl":true,"value":"U4Zk3FBctzHv6xO5","mode":"list","cachedResultName":"[Regional] Tools Agendamento"},"workflowInputs":{"mappingMode":"defineBelow","value":{"type":"rescheduleAppointment","numero":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('numero', `Número de telefone do cliente`, 'string') }}","data":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data', `Será a data de reagendamento seguindo esse formato: 2025-01-01T10:15:00-03:00`, 'string') }}","sinistro":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('sinistro', `Sinistro do cliente`, 'string') }}"},"matchingColumns":[],"schema":[{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"data","displayName":"data","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"numero","displayName":"numero","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"sinistro","displayName":"sinistro","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.1,"position":[512,144],"id":"679e9540-a3ef-4e13-ab7d-a64b060abb90","name":"realizar_reagendamento"},{"parameters":{"name":"tirar_duvidas","description":"• tirar_duvidas: Responde dúvidas sobre o processo de vistoria online.","workflowId":{"__rl":true,"value":"MlybBd0DJNbT5dsV","mode":"list","cachedResultName":"[Regional] Agente DUVIDAS"},"workflowInputs":{"mappingMode":"defineBelow","value":{"numero":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('numero', `Número de telefone do cliente`, 'string') }}","data":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data', `Sera a dúvida que o cliente tirou`, 'string') }}","type":"duvidas"},"matchingColumns":[],"schema":[{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"data","displayName":"data","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false},{"id":"numero","displayName":"numero","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.1,"position":[128,368],"id":"c14331d8-4a94-44d5-ad5e-b97b5a5015a5","name":"tirar_duvidas"},{"parameters":{"name":"transferir_humano","description":"• transferir_humano: Transfere para atendimento humano (impasse, erro, solicitação direta ou falta de informações).","workflowId":{"__rl":true,"value":"ZPzwHeSJXacjc8Yj","mode":"list","cachedResultName":"transferir humano"},"workflowInputs":{"mappingMode":"defineBelow","value":{"chatId":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('chatId', `chatId da conversa`, 'string') }}","telefone":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefone', `Número de telefone do cliente`, 'string') }}"},"matchingColumns":[],"schema":[{"id":"chatId","displayName":"chatId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"telefone","displayName":"telefone","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.1,"position":[512,368],"id":"11199acd-cf2e-4b0a-a14e-ca700d0e0b79","name":"transferir_humano"},{"parameters":{"name":"encerrar_conversa","description":"• encerrar_conversa: Encerra o atendimento após confirmação do cliente.","workflowId":{"__rl":true,"value":"MgqHIza6CpIV8nVW","mode":"list","cachedResultName":"[Regional] sub_workflow"},"workflowInputs":{"mappingMode":"defineBelow","value":{"type":"finalizeChat","numero":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('numero', `Número de telefone do cliente`, 'string') }}","data":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data', `Será o Id do Chat`, 'string') }}"},"matchingColumns":[],"schema":[{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"data","displayName":"data","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false},{"id":"numero","displayName":"numero","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.1,"position":[304,368],"id":"0f2c354f-3684-4ced-a080-62116cbf1541","name":"encerrar_conversa"},{"parameters":{"content":"### Agendamentos\n\nFluxo geral de agendamentos: lista de horários disponiveis, realiza agendamentos e reagendamentos caso precise","height":280,"width":700},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[0,0],"id":"c57df777-7470-44f7-b6d4-52de66c7feb8","name":"Sticky Note"},{"parameters":{"content":"## MCP SERVER TRIGGER\n\nServidor central responsável por concentrar e organizar todas as nossas funções, incluindo lógica de negócios, agendamentos e integrações.\n","height":300,"width":520,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-624,64],"typeVersion":1,"id":"a1137189-8440-4d5b-9d60-b88667b2a787","name":"Sticky Note1"},{"parameters":{"descriptionType":"manual","toolDescription":"• agendamento_info: Consulta status do agendamento atual do cliente.","operation":"get","tableId":"schedules","filters":{"conditions":[{"keyName":"claim_number","keyValue":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conditions0_Value', `Será o sinistro do cliente`, 'string') }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[320,624],"id":"3917d716-a78a-4a23-a026-4314f09fda2f","name":"Supabase1","credentials":{"supabaseApi":{"id":"qlJQApzQRTotI1yx","name":"Supabase Regional"}}}],"connections":{"disponibilidade":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"realizar_agendamento":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"realizar_reagendamento":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"tirar_duvidas":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"transferir_humano":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"encerrar_conversa":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"Supabase1":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"86e7d1ed-1fe6-47a0-83c0-58cc6a814122","triggerCount":0,"shared":[{"createdAt":"2025-07-18T19:08:59.035Z","updatedAt":"2025-07-18T19:08:59.035Z","role":"workflow:owner","workflowId":"CsOTcOT7WBbkUIip","projectId":"W87TnA5pjVYkC94H"}],"tags":[]}